---
## Front matter
lang: ru-RU
title: Лабораторная работа 4
## subtitle: Простейший шаблон
author:
  - Тагиев Б. А.
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 5 апреля 2023

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
figureTitle: "Рис."
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
mainfont: DejaVu Serif
romanfont: DejaVu Serif
sansfont: DejaVu Sans
monofont: DejaVu Sans Mono
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
---
## Цель работы

Самостоятельно смоделировать сеть с определенными правилами.

## Задание

Описание моделируемой сети:

 - сеть состоит из N TCP-источников, N TCP-приёмников, двух маршрутизаторов R1 и R2 между источниками и приёмниками (N — не менее 20);

 - между TCP-источниками и первым маршрутизатором установлены дуплексные соединения с пропускной способностью 100 Мбит/с и задержкой 20 мс очередью типа DropTail;

 - между TCP-приёмниками и вторым маршрутизатором установлены дуплексные соединения с пропускной способностью 100 Мбит/с и задержкой 20 мс очередью типа DropTail;

## Задание

 - между маршрутизаторами установлено симплексное соединение (R1–R2) с пропускной способностью 20 Мбит/с и задержкой 15 мс очередью типа RED, размером буфера 300 пакетов; в обратную сторону — симплексное соединение (R2–R1) с пропускной способностью 15 Мбит/с и задержкой 20 мс очередью типа DropTail;

 - данные передаются по протоколу FTP поверх TCPReno;

 - параметры алгоритма RED: qmin = 75, qmax = 150, qw = 0, 002, pmax = 0.1;

 - максимальный размер TCP-окна 32; размер передаваемого пакета 500 байт; время моделирования — не менее 20 единиц модельного времени.

## Выполнение лабораторной работы

1. Начнем с основного файла, в нем мы имеем создание симулятора и добавление внешних файлов. [Здесь представлен листинг нашей программы](#ns2-red.tcl)

2. [Далее мы задаем наши узлы](#nodes.tcl), создаем два маршрутизатора и соединяем их с нашим узлами.

3. Теперь, [мы задаем нашу очередь](#queue.tcl), в ней мы настраиваем параметры и задаем файл трассировки.

## Выполнение лабораторной работы

4. Зададим процедуры [`finish`](#finish.tcl) и [`plotWindow`](#plotWindow.tcl), которые отвечают за создание файлов, необходимых для графиков и запуск отрисовки графиков; и создания файла размера окна.

5. [Файл `modeling.tcl`](#modeling.tcl) отвечает за симулируемое время, то бишь запускает процессы, необходимые нашей симуляции, а именно запуск `ftp` и запуск поцедуры [`plotWindow`](#plotWindow.tcl)

6. Запустив программу, мы увидим запуск `xgraph` с изменением размера окна и длины очереди и `nam`, который показывает нам нашу моделируемую сеть.

## Выполнение лабораторной работы

7. Запустив наш скрипт [`plot.sh`](#plot.sh) мы получим на выходе три файла с нашими графиками:

 - изменение размера длины очереди

![&nbsp;Изменение размера длины очереди на линке](./files/queues.pdf){ width=40% margin=auto }

## Выполнение лабораторной работы

 - изменение размера средней длины очереди

![&nbsp;Изменение размера средней длины очереди на линке](./files/ave_queues.pdf){ width=40% margin=auto }

## Выполнение лабораторной работы

 - изменение размера окна, так как мы задали потолок окна, то он его не будет превышать.

![&nbsp;Изменение размера окна TCP на всех источниках при N=20](./files/TCP.pdf){ width=40% margin=auto }

## Выполнение лабораторной работы

8. Мы также можем посмотреть изменение размера окна TCP на определенном линке. График будет выглядеть следующим образом (для разных узлов график будет выглядеть по разному, однако будет примерно схож).

![&nbsp;Изменение размера окна TCP на линке 1-го источника при N=20](./files/TCP2.pdf){ width=40% margin=auto }

## Выводы

По мере выполнения работы, я приобрел практические навыки по работе с NS2.

